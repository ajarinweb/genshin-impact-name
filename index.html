<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Nama Genshin Impact</title>

<style>
body {
    background: linear-gradient(135deg, #1e2a4a, #3a4f7a);
    font-family: Arial, sans-serif;
    height: 100vh;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
}

.box {
    background: rgba(0,0,0,0.55);
    padding: 30px;
    border-radius: 15px;
    width: 340px;
    text-align: center;
    box-shadow: 0 0 15px rgba(255,255,255,0.2);
}

button {
    margin: 8px;
    padding: 10px 20px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-size: 14px;
}

.btn-primary {
    background: #4da3ff;
    color: white;
}

.btn-secondary {
    background: #ffd166;
    color: black;
}

select, input {
    width: 100%;
    padding: 8px;
    margin-top: 10px;
    border-radius: 8px;
    border: none;
}

.hidden {
    display: none;
}
</style>
</head>

<body>

<!-- KOTAK AWAL -->
<div class="box" id="homeBox">
    <h2>Nama-nama di Genshin Impact</h2>
    <button class="btn-primary" onclick="showInput()">Masukan</button>
    <button class="btn-secondary">Cari</button>
</div>

<!-- KOTAK INPUT -->
<div class="box hidden" id="inputBox">
    <h2>Masukan Nama</h2>

    <select id="daerah" onchange="enableJenis()">
        <option value="">-- Pilih Daerah --</option>
        <option>Mondstad</option>
        <option>Liyue</option>
        <option>Inazuma</option>
        <option>Sumeru</option>
        <option>Fontain</option>
        <option>Natlan</option>
        <option>Nord-Krai</option>
        <option>Sneznaya</option>
    </select>

    <select id="jenis" disabled onchange="enableInput()">
        <option value="">-- Pilih Jenis --</option>
        <option>Laki-laki</option>
        <option>Perempuan</option>
        <option>Vanarana</option>
        <option>Oceanid</option>
        <option>Segwine</option>
        <option>Saurian</option>
        <option>Organisasi</option>
    </select>

    <input type="text" id="nama" placeholder="Masukan nama..." disabled>

    <button class="btn-primary" onclick="simpanData()">Simpan</button>
</div>

<!-- KOTAK KONFIRMASI DUPLIKAT -->
<div class="box hidden" id="confirmBox">
    <h3>Nama sudah ada!</h3>
    <p>Perlu edit?</p>
    <button class="btn-primary" onclick="editData()">Edit</button>
    <button class="btn-secondary" onclick="buangData()">Buang</button>
</div>

<script>
const daerahEl = document.getElementById("daerah");
const jenisEl = document.getElementById("jenis");
const namaEl = document.getElementById("nama");

let indexEdit = null;

/* NAVIGASI */
function showInput() {
    document.getElementById("homeBox").classList.add("hidden");
    document.getElementById("inputBox").classList.remove("hidden");
}

function backToHome() {
    document.getElementById("inputBox").classList.add("hidden");
    document.getElementById("confirmBox").classList.add("hidden");
    document.getElementById("homeBox").classList.remove("hidden");
}

/* FORM CONTROL */
function enableJenis() {
    jenisEl.disabled = false;
}

function enableInput() {
    namaEl.disabled = false;
}

function resetForm() {
    daerahEl.value = "";
    jenisEl.value = "";
    namaEl.value = "";
    jenisEl.disabled = true;
    namaEl.disabled = true;
}

/* SIMPAN DATA */
function simpanData() {
    const daerah = daerahEl.value;
    const jenis = jenisEl.value;
    const nama = namaEl.value.trim();

    if (!daerah || !jenis || !nama) {
        alert("Semua data harus diisi!");
        return;
    }

    let data = JSON.parse(localStorage.getItem("genshinNames")) || [];

    const foundIndex = data.findIndex(
        item => item.nama.toLowerCase() === nama.toLowerCase()
    );

    if (foundIndex !== -1 && indexEdit === null) {
        indexEdit = foundIndex;
        document.getElementById("inputBox").classList.add("hidden");
        document.getElementById("confirmBox").classList.remove("hidden");
        return;
    }

    if (indexEdit !== null) {
        data[indexEdit] = { daerah, jenis, nama };
        indexEdit = null;
    } else {
        data.push({ daerah, jenis, nama });
    }

    localStorage.setItem("genshinNames", JSON.stringify(data));
    alert("Data berhasil disimpan!");

    resetForm();
    backToHome();
}

/* EDIT DATA */
function editData() {
    let data = JSON.parse(localStorage.getItem("genshinNames"));
    const item = data[indexEdit];

    daerahEl.value = item.daerah;
    jenisEl.disabled = false;
    jenisEl.value = item.jenis;
    namaEl.disabled = false;
    namaEl.value = item.nama;

    document.getElementById("confirmBox").classList.add("hidden");
    document.getElementById("inputBox").classList.remove("hidden");
}

/* BUANG */
function buangData() {
    indexEdit = null;
    resetForm();
    backToHome();
}
</script>

</body>
</html>
